# 7월 17일

오늘부터 본격적인 연구 진행(1달이 날라갔다…)

위처럼 alpha1, alpha5의 값이 높은 순으로 그림을 그려 확인 비교해보자

### Alpha1 top10값 graph에 표시하는 코드

```python
# avg alpha1 값이 큰 것들을 시각화해서 그래프에 표시하기
extract_avg_alpha1=[]
extract_avg_value=[]
for i in range(min(10,len(avg_alpha1_values))):
    extract_avg_alpha1.append(avg_alpha1_values[i][0])
    extract_avg_value.append(avg_alpha1_values[i][1])
print(len(extract_avg_value))
print(len(extract_avg_alpha1))

# print the new list without duplicates

diff_input_list = [x for x in input_list if x not in extract_avg_alpha1]

print('input_list',len(input_list))
print('extract_avg_alpha1',len(extract_avg_alpha1))
print('diff_input_list',len(diff_input_list))
print(diff_input_list)

            

node_name = ['context','hunt','owl','owls','']
other_node = ['nocturnal', 'bird_of_prey', 'hunting', 'animal', 'fly', 'hawk', 'eyes']
node1 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
g = nx.Graph()
for i in range(len(node1)):
    g.add_nodes_from([(node1[i],{'text':""})])
color_map = []
for node in g:
        if node == 0:
            color_map.append('#800080') #purple
        elif node >= 1 and node <= 3:
            color_map.append('#0000FF')      # blue
        # elif node >= 6 and node <=7:
        #     color_map.append('#FF0000')    # red
        else:
            color_map.append('#808080')         # gray

for kk in g.nodes.data():
        if kk[0] == 0:
            kk[1]['text'] = node_name[-1]
        elif kk[0] == 1:
            kk[1]['text'] = node_name[1]
        elif kk[0] == 2:
            kk[1]['text'] = node_name[2]
        elif kk[0] == 3:
            kk[1]['text'] = node_name[3]
        elif kk[0] == 4:
            kk[1]['text'] = other_node[0]
        elif kk[0] == 5:
            kk[1]['text'] = other_node[1]
        elif kk[0] == 6:
            kk[1]['text'] = other_node[2]
        elif kk[0] == 7:
            kk[1]['text'] = other_node[3]
        elif kk[0] == 8:
            kk[1]['text'] = other_node[4]
        elif kk[0] == 9:
            kk[1]['text'] = other_node[5]
        elif kk[0] == 10:
            kk[1]['text'] = other_node[6]
        else:
            kk[1]['text'] = node_name[-1]
for i in range(len(diff_input_list)):  # 이것은 길이 3의 사이클만 그릴때 필요한 Edge 
    g.add_edges_from([(diff_input_list[i][0],diff_input_list[i][1],{'thickness':''}),(diff_input_list[i][0],diff_input_list[i][2],{'thickness':''}),(diff_input_list[i][1],diff_input_list[i][2],{'thickness':''})])
    
pos = nx.kamada_kawai_layout(g)
node_labels={n:(d['text']) for n,d in g.nodes(data=True)}
nx.draw_networkx_labels(g,alpha=1.0,labels=node_labels,bbox=dict(facecolor='yellow',alpha=0.3),pos=pos,verticalalignment='bottom',font_size=10,font_color='black')
nx.draw(g,pos=pos,node_color=color_map,with_labels=True)

import matplotlib.pyplot as plt

# create a dictionary mapping edge thickness to value
edge_thickness = {i:j for j,i in enumerate(extract_avg_value)}
print(extract_avg_alpha1)
default_value = 1
edge_thickness.update({val:default_value for val in set(edge_thickness.keys()) - set(extract_avg_value)})
for i in range(len(extract_avg_alpha1)):
    g.add_edges_from([(extract_avg_alpha1[i][0],extract_avg_alpha1[i][1],{'thickness':extract_avg_value[i]}),(extract_avg_alpha1[i][0],extract_avg_alpha1[i][2],{'thickness':extract_avg_value[i]}),(extract_avg_alpha1[i][1],extract_avg_alpha1[i][2],{'thickness':extract_avg_value[i]})])
    

# draw the network with edge thickness based on the edge_widths list
nx.draw(g, pos=pos, node_color=color_map, with_labels=True)
nx.draw_networkx_edges(g, pos=pos, edge_color='black', width=[edge_thickness.get(edge[2]['thickness'],default_value) for edge in g.edges(data=True)])

# add a legend for edge thickness
legend_items = [(val, f"{val}") for val in edge_thickness.values()]
legend = plt.legend(*zip(*legend_items), loc='upper left', title='Edge Thickness')
legend.get_title().set_fontsize('xx-small')

plt.show()
```

### Alpha5 top10값 graph에 표시하는 코드

```python
# avg alpha5 값이 큰 것들을 시각화해서 그래프에 표시하기
extract_avg_alpha5=[]
extract_avg_value5=[]
for i in range(min(10,len(avg_alpha5_values))):
    extract_avg_alpha5.append(avg_alpha5_values[i][0])
    extract_avg_value5.append(avg_alpha5_values[i][1])
print(len(extract_avg_value))
print(len(extract_avg_alpha1))

# print the new list without duplicates

diff_input_list5 = [x for x in input_list if x not in extract_avg_alpha5]

print('input_list',len(input_list))
print('extract_avg_alpha5',len(extract_avg_alpha5))
print('diff_input_list',len(diff_input_list5))
print(diff_input_list5)

            

node_name = ['context','hunt','owl','owls','']
other_node = ['nocturnal', 'bird_of_prey', 'hunting', 'animal', 'fly', 'hawk', 'eyes']
node1 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
g = nx.Graph()
for i in range(len(node1)):
    g.add_nodes_from([(node1[i],{'text':""})])
color_map = []
for node in g:
        if node == 0:
            color_map.append('#800080') #purple
        elif node >= 1 and node <= 3:
            color_map.append('#0000FF')      # blue
        # elif node >= 6 and node <=7:
        #     color_map.append('#FF0000')    # red
        else:
            color_map.append('#808080')         # gray

for kk in g.nodes.data():
        if kk[0] == 0:
            kk[1]['text'] = node_name[-1]
        elif kk[0] == 1:
            kk[1]['text'] = node_name[1]
        elif kk[0] == 2:
            kk[1]['text'] = node_name[2]
        elif kk[0] == 3:
            kk[1]['text'] = node_name[3]
        elif kk[0] == 4:
            kk[1]['text'] = other_node[0]
        elif kk[0] == 5:
            kk[1]['text'] = other_node[1]
        elif kk[0] == 6:
            kk[1]['text'] = other_node[2]
        elif kk[0] == 7:
            kk[1]['text'] = other_node[3]
        elif kk[0] == 8:
            kk[1]['text'] = other_node[4]
        elif kk[0] == 9:
            kk[1]['text'] = other_node[5]
        elif kk[0] == 10:
            kk[1]['text'] = other_node[6]
        else:
            kk[1]['text'] = node_name[-1]
for i in range(len(diff_input_list5)):  # 이것은 길이 3의 사이클만 그릴때 필요한 Edge 
    g.add_edges_from([(diff_input_list5[i][0],diff_input_list5[i][1],{'thickness':''}),(diff_input_list5[i][0],diff_input_list5[i][2],{'thickness':''}),(diff_input_list5[i][1],diff_input_list5[i][2],{'thickness':''})])
    
pos = nx.kamada_kawai_layout(g)
node_labels={n:(d['text']) for n,d in g.nodes(data=True)}
nx.draw_networkx_labels(g,alpha=1.0,labels=node_labels,bbox=dict(facecolor='yellow',alpha=0.3),pos=pos,verticalalignment='bottom',font_size=10,font_color='black')
nx.draw(g,pos=pos,node_color=color_map,with_labels=True)

import matplotlib.pyplot as plt

# create a dictionary mapping edge thickness to value
edge_thickness = {i:j for j,i in enumerate(extract_avg_value5)}
print(extract_avg_alpha5)
default_value = 1
edge_thickness.update({val:default_value for val in set(edge_thickness.keys()) - set(extract_avg_value5)})
for i in range(len(extract_avg_alpha5)):
    g.add_edges_from([(extract_avg_alpha5[i][0],extract_avg_alpha5[i][1],{'thickness':extract_avg_value5[i]}),(extract_avg_alpha5[i][0],extract_avg_alpha5[i][2],{'thickness':extract_avg_value5[i]}),(extract_avg_alpha5[i][1],extract_avg_alpha5[i][2],{'thickness':extract_avg_value5[i]})])
    

# draw the network with edge thickness based on the edge_widths list
nx.draw(g, pos=pos, node_color=color_map, with_labels=True)
nx.draw_networkx_edges(g, pos=pos, edge_color='black', width=[edge_thickness.get(edge[2]['thickness'],default_value) for edge in g.edges(data=True)])

# add a legend for edge thickness
legend_items = [(val, f"{val}") for val in edge_thickness.values()]
legend = plt.legend(*zip(*legend_items), loc='upper left', title='Edge Thickness')
legend.get_title().set_fontsize('xx-small')

plt.show()
```

```python
other_node_index = []
other_node = []
for i in other:
    other_node_index.append(concept_ids[i])
print('길이 3 사이클에 속하는 other node만 출력')
for i in other_node_index:
    print(concept_ids.index(i),'번노드','->',i,':',id2concept[i-1])
    other_node.append(str(id2concept[i-1]))
print('other_node',other_node)
```

['inborn', 'see', 'commonality', 'nature', 'stripe', 'name', 'round', 'class', 'bar', 'property', 'point', 'heritage', 'throw_true', 'drop', 'inheritance', 'distinguish', 'hereditary']

['christmas', 'yule', 'june_solstice', 'arctic_circle', 'december_solstice', 'midwinter', 'tropic', 'summer_solstice', 'snowflake', 'tropic_of_capricorn', 'autumn', 'fall', 'tropic_of_cancer', 'snow', 'cold', 'bear', 'earthly_branch']

['metal', 'hard', 'color', 'use', 'run', 'sharp', 'sun', 'like', 'tool', 'eye', 'picture', 'line', 'chair', 'stitch']

['cell', 'energy', 'food', 'book', 'living', 'ground', 'bed', 'rubber', 'gum']

other node [10, 11, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24]
node1 [0, 2, 3, 5, 6, 7, 10, 11, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24]

['sand', 'silicon_burning', 'water', 'oxygen_burning', 'carbon_group', 'glass', 'silicide', 'metalloid', 'atomic_weight', 'chemical_element', 'atom', 'ekasilicon']

```python
node_name = ['context','trash','respiration','cellular','cellular_respiration','plant','treasure','']
other_node_name = ['cell','energy','food','book','living','ground','bed','rubber','gum']
```

880 문제에서

alpha5 top10의 순서가

cycle encoder, qagnn의 차이는

1. Node list: [1, 9, 7], Average Alpha5: 0.2998, Edge Types: [36, 7, 36]
2. Node list: [2, 3, 10], Average Alpha5: 0.2933, Edge Types: [36, 29, 36]