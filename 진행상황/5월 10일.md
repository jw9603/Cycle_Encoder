# 5월 10일

edge_type이 relatedto 인 것이 무려 74%이다. 

교수님과 미팅 결과,

relatedto가 없는 사이클의 비율을 먼저 알아보자.

related to (17)과 이의 역방향(36) 에지 타입을 제외하고 길이 3의 사이클의 비율을 문제별로 알아보고자 한다.

이에 대한 코드는 다음과 같다.

```python
## 사이클 리스트 가져오기
a =[{25: [14, 20, 6]}, {25: [17, 20, 6]}, {25: [14, 17, 6]}, {25: [3, 15, 11]}, {25: [3, 12, 15]}, {25: [4, 12, 15]}, {25: [9, 12, 15]}, {25: [4, 9, 15]}, {25: [3, 9, 15]}, {25: [1, 5, 0]}, {25: [1, 24, 5]}, {25: [25, 24, 5]}, {25: [1, 22, 5]}, {25: [21, 22, 5]}, {25: [1, 25, 5]}, {25: [1, 21, 5]}, {25: [1, 19, 21]}, {25: [1, 18, 19]}, {25: [2, 7, 21]}, {25: [1, 7, 21]}, {25: [2, 8, 7]}, {25: [1, 16, 21]}, {25: [2, 16, 21]}, {25: [3, 4, 0]}, {25: [1, 3, 0]}, {25: [1, 13, 3]}, {25: [1, 2, 0]}]
print(len(a))

import torch

edge_index = torch.tensor([[ 1, 15, 19, 16, 16, 21,  3,  3,  5,  9,  9, 12, 12, 15, 15, 19,  3,  7,
         13, 16,  1,  1,  1,  1,  1,  1,  1,  1,  1,  3,  3,  3,  3,  5,  6,  7,
          7,  7,  7,  8,  8,  8,  9,  9,  9, 11, 11, 11, 12, 12, 12, 13, 13, 13,
         14, 14, 14, 14, 15, 15, 15, 16, 17, 17, 17, 17, 18, 18, 18, 19, 19, 19,
         20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 22, 22, 22, 23, 23, 24, 24, 25,
         25, 25, 21,  0,  0,  0,  0,  0,  0, 19,  3,  1,  1,  2,  5,  4, 12, 25,
          4, 15,  3,  4,  4,  9, 18,  1,  2,  1, 21, 22,  2,  5,  7, 10, 18, 19,
         21, 22,  4,  9, 12, 15, 22, 10,  1,  2,  8, 21,  2,  3,  7,  3, 12, 15,
          3,  6, 15,  3,  9, 15,  1,  2,  3,  5,  6, 17, 20,  3,  9, 12, 21,  1,
          4,  6, 20,  1,  2, 19,  1,  4, 18,  4,  5,  6, 17,  1,  2,  5,  7, 19,
         22,  1,  5, 21,  4,  6,  1,  5,  1,  5, 24,  7,  1,  2,  3,  4,  5,  6],
        [19,  3,  1,  1,  2,  5,  4, 12, 25,  4, 15,  3,  4,  4,  9, 18,  1,  2,
          1, 21, 22,  2,  5,  7, 10, 18, 19, 21, 22,  4,  9, 12, 15, 22, 10,  1,
          2,  8, 21,  2,  3,  7,  3, 12, 15,  3,  6, 15,  3,  9, 15,  1,  2,  3,
          5,  6, 17, 20,  3,  9, 12, 21,  1,  4,  6, 20,  1,  2, 19,  1,  4, 18,
          4,  5,  6, 17,  1,  2,  5,  7, 19, 22,  1,  5, 21,  4,  6,  1,  5,  1,
          5, 24,  7,  1,  2,  3,  4,  5,  6,  1, 15, 19, 16, 16, 21,  3,  3,  5,
          9,  9, 12, 12, 15, 15, 19,  3,  7, 13, 16,  1,  1,  1,  1,  1,  1,  1,
          1,  1,  3,  3,  3,  3,  5,  6,  7,  7,  7,  7,  8,  8,  8,  9,  9,  9,
         11, 11, 11, 12, 12, 12, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 16, 17,
         17, 17, 17, 18, 18, 18, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 21,
         21, 22, 22, 22, 23, 23, 24, 24, 25, 25, 25, 21,  0,  0,  0,  0,  0,  0]])

edge_type = torch.tensor([ 2,  2,  2,  3,  3,  3,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7, 10, 10,
        10, 10, 12, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17,
        17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17,
        17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17,
        17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17,
        17, 17, 18,  0,  0,  0,  0,  1,  1, 21, 21, 21, 22, 22, 22, 26, 26, 26,
        26, 26, 26, 26, 26, 26, 26, 29, 29, 29, 29, 31, 36, 36, 36, 36, 36, 36,
        36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36,
        36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36,
        36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36,
        36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36, 37, 19, 19, 19, 19, 20, 20])
print(edge_index.shape)
print(edge_type.shape)

filtered_edge_list1 = []
filtered_edge_list2 = []
filtered_edge_type = []
######################## Edge filtering #################################
for i in range(len(edge_type)):
    if edge_type[i] in [17,36]:
        continue
    filtered_edge_list1.append(edge_index[0,i].item())
    filtered_edge_list2.append(edge_index[1,i].item())       
    filtered_edge_type.append(edge_type[i].item())

filtered_edge_index = torch.stack([torch.tensor(filtered_edge_list1),torch.tensor(filtered_edge_list2)],dim=0)
#########################################################################

max_node = torch.max(filtered_edge_index)
node1=list(set(filtered_edge_index[0].tolist()))   

node_name = ['context','winter','december','winter_solstice','solstice','north','equator','']
g = nx.Graph()
for i in range(len(node1)):
    g.add_nodes_from([(node1[i],{'text':""})])
color_map = []
for node in g:
        if node == 0:
            color_map.append('#800080') #purple
        elif node >= 1 and node <= 4:
            color_map.append('#0000FF')      # blue
        elif node >=5 and node <= 6:
            color_map.append('#FF0000')    # red
        else:
            color_map.append('#808080')         # gray

for kk in g.nodes.data():
        if kk[0] == 0:
            kk[1]['text'] = node_name[-1]
        elif kk[0] == 1:
            kk[1]['text'] = node_name[1]
        elif kk[0] == 2:
            kk[1]['text'] = node_name[2]
        elif kk[0] == 3:
            kk[1]['text'] = node_name[3]
        elif kk[0] == 4:
            kk[1]['text'] = node_name[4]
        elif kk[0] == 5:
            kk[1]['text'] = node_name[5]
        elif kk[0] == 6:
            kk[1]['text'] = node_name[6]
        else:
            kk[1]['text'] = node_name[-1]
g.add_edges_from([(filtered_edge_list1[i],filtered_edge_list2[i],{'type':filtered_edge_type[i]}) for i in range(len(filtered_edge_type))])
pos = nx.kamada_kawai_layout(g)
node_labels={n:(d['text']) for n,d in g.nodes(data=True)}
nx.draw_networkx_labels(g,alpha=1.0,labels=node_labels,bbox=dict(facecolor='yellow',alpha=0.3),pos=pos,verticalalignment='bottom',font_size=10,font_color='black')
nx.draw(g,pos=pos,node_color=color_map,with_labels=True)

######################## 17, 36 edge_type 지우고나서 길이 3의 사이클 리스트###################
cycle_list = []
cycle_detect = find_cycle(g)
for k in range(0,len(cycle_detect)):
    if len(cycle_detect[k]) == 3:
        cycle_list.append(cycle_detect[k])
print(cycle_list)

percentage = (len(cycle_list)/len(a)) *100
print(f'related to가 아닌 길이 3의 사이클의 비율 : {percentage:.4f}%')
######################################################################################

Result
>> [[3, 4, 0], [3, 15, 4], [9, 15, 4], [3, 12, 4], [1, 3, 0]]
related to가 아닌 길이 3의 사이클의 비율 : 18.5185%
```

이 코드를 총 47의 문제에 대해서 진행해보자

오늘은 7문제 정도 함