# 5월 15일

**이번주에 할 내용**

**1. Edge** 개별 빈도

- 길이 3의 사이클 내 Edge type별 형성 비율(빈도) 측정

**2. Set**기반**Edge**패턴빈도**&Set**무시**Edge**패턴빈도

- 하나의 cycle 내에서 발생하는 3개의 edge에서 동시에 발생하는 edge의 패턴의 빈도

**3.** 평균 대비 사이클 내 **“related to”**가 아닌 **edge**의 **attention Weight** 의 크기

- 문제당(subgraph) 평균 및 중앙값 대비 attention weight

# 1. Edge 개별 빈도

길이 3의 사이클 내 Edge type별 형성 비율 측정하기

```python
# Define a dictionary to store the counts of each edge type
edge_type_counts = {}

# Loop through all cycles of length 3 in a0
for cycle_tuple in a0:
    # Get the three nodes that form the current cycle
    cycle = cycle_tuple[0]
    node1, node2, node3 = cycle

    # Check if the edges exist in the subgraph
    edge_index1 = torch.tensor([node1, node2])
    edge_index1_inv = torch.tensor([node1,node3])
   
    edge_index2 = torch.tensor([node2, node3])
    edge_index2_inv = torch.tensor([node3,node2])
    
    edge_index3 = torch.tensor([node3, node1])
    edge_index3_inv = torch.tensor([node2,node1])
    for i in range(edge_index.shape[1]):
        if (edge_index[0][i]==edge_index1[0]) and (edge_index[1][i]==edge_index1[1]):
            edge_type1=edge_type[i].item()
        if (edge_index[0][i]==edge_index1_inv[0]) and (edge_index[1][i]==edge_index1_inv[1]):
            edge_type1_inv = edge_type[i].item()
        if (edge_index[0][i]==edge_index2[0]) and (edge_index[1][i]==edge_index2[1]): 
            edge_type2=edge_type[i].item()
        if (edge_index[0][i]==edge_index2_inv[0]) and (edge_index[1][i]==edge_index2_inv[1]):
            edge_type2_inv = edge_type[i].item()
        if (edge_index[0][i]==edge_index3[0]) and (edge_index[1][i]==edge_index3[1]):
            edge_type3=edge_type[i].item()
        if (edge_index[0][i]==edge_index3_inv[0]) and (edge_index[1][i]==edge_index3_inv[1]):
            edge_type3_inv = edge_type[i].item()
    
    # Update the count of the current edge types
    edge_types = (edge_type1, edge_type2, edge_type3)
    edge_types_inv = (edge_type1_inv, edge_type2_inv, edge_type3_inv)
    if edge_types in edge_type_counts:
        edge_type_counts[edge_types] += 1
    else:
        edge_type_counts[edge_types] = 1
    if edge_types_inv in edge_type_counts:
        edge_type_counts[edge_types_inv] += 1
    else:
        edge_type_counts[edge_types_inv] = 1

# Print the distribution of edge types in cycles of length 3
print("Distribution of edge types in cycles of length 3:")
cnt = 0
for edge_types, count in edge_type_counts.items():
    print("Edge types", edge_types, "appear", count, "times.")
    cnt+=count
print(cnt)

>>Distribution of edge types in cycles of length 3:
Edge types (36, 17, 0) appear 40 times.
Edge types (19, 36, 17) appear 40 times.
Edge types (36, 17, 17) appear 8 times.
Edge types (36, 36, 17) appear 46 times.
Edge types (17, 17, 17) appear 24 times.
Edge types (36, 36, 36) appear 24 times.
Edge types (26, 17, 17) appear 48 times.
Edge types (36, 36, 7) appear 48 times.
Edge types (3, 17, 17) appear 5 times.
Edge types (36, 36, 22) appear 18 times.
Edge types (3, 17, 36) appear 13 times.
Edge types (36, 17, 36) appear 38 times.
Edge types (36, 17, 22) appear 2 times.
Edge types (3, 36, 17) appear 2 times.
Edge types (7, 17, 36) appear 5 times.
Edge types (36, 36, 26) appear 5 times.
Edge types (36, 20, 0) appear 4 times.
Edge types (19, 1, 17) appear 4 times.
374
```

![Untitled](5%E1%84%8B%E1%85%AF%E1%86%AF%2015%E1%84%8B%E1%85%B5%E1%86%AF%20b2a8929126e84bd6aafe4d8aa38e05d1/Untitled.png)