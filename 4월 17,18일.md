# 4월 17,18일

이렇게 conceptnet.en.new.tsv만으로 other node의 정보를 파악하기 힘듦,

추가적인 정보가 필요 → edge 정보

그렇다면 edge_index, edge_type을 알아내야 함

### 0 : 7-903-B 187개

- 0 : 3
- 1,2,3, : 0
- 4,5,6,7 : 1
- 8~199 : 2
- text : "The main component in dirt is”
- question node : "qc": ["component", "dirt", "main"]
- answer node : "ac": ["break", "broken", "stone", "stones"]
- 노드들의 인덱스 및 사이클 개수
    - question node
        - 1 : component(3)
            - [1, 41, 63], [1, 56, 76], [1, 23, 75]
            - other node들 : [23, 56, 41, 75, 76, 63]
            - **겹치는 other node**
                - break(4)와 겹치는 노드 : 41, 63 demulsify, deconstruct → 딱히 쓸모 없음
                - stone(6)과 겹치는 노드 : 76 [color,making,wood,paper,building_block]중 1개 → paper
        - 2 : dirt(10)
            - [2, 86, 30], **[2, 91, 82]**, **[2, 61, 91],** [2, 71, 65], [2, 60, 65], [2, 49, 65], [2, 42, 82], [2, 31, 86], [2, 32, 86], [2, 6, 0]
            - other node들 : [30, 31, 32, 42, 49, 60, 61, 65, 71, 82, 86, 91]
            - **겹치는 other node**
                - break(4)와 겹치는 노드 : 30, 61 → **smoke,hole**
                - stone(6)과 겹치는 노드 : 32, 60, 65, 82, 86, 91 [gravel, material, stone, dyke, seed, ground, grave, bed, rock, sand ,opaque, earth, small] 중 6개
                - **32 : sand**
                - 82 : grave
                - **86 : material**
                - 91 : grave
        - 3 : main(5)
            - [3, 36, 81], [3, 69, 36], [3, 50, 28], [3, 47, 28], [3, 10, 47]
            - other node들 : [10, 28, 36, 47, 50, 69, 81]
            - **겹치는 Other node**
                - stone(6)과 겹치는 노드 : 28, 50, 81 [big, throw, point, river, name, british, water]중 3개
    - answer node
        - 4 : break(30)
            - [4, 89, 61], [4, 79, 89], [4, 63, 83], [4, 97, 63], [4, 11, 97], [4, 41, 63], [4, 68, 83], [4, 9, 68], [4, 67, 55], [4, 16, 67], [4, 43, 68], [4, 51, 89], [4, 40, 89], [4, 95, 40], [4, 48, 61], [4, 52, 48], [4, 70, 48], [4, 101, 70], [4, 90, 61], [4, 88, 24], [4, 12, 88], [4, 77, 30], [4, 59, 30], [4, 62, 44], [4, 22, 62], [4, 5, 0], [4, 99, 5], [4, 27, 5], [4, 20, 5], [4, 85, 5]
            - other node들 : [9, 11, 12, 16, 20, 22, 24, 27, 30, 40, 41, 43, 44, 48, 51, 52, 55, 59, 61, 62, 63, 67, 68, 70, 77, 79, 83, 85, 88, 89, 90, 95, 97, 99, 101]
            - **겹치는 other node**
                - component(1)과 겹치는 노드 : 41, 63
                - dirt(2)와 겹치는 노드 : 30, 61
                - broken(5)와 겹치는 노드 : 9, 11, 12, 16, 24, 40, 48, 51, 52, 55, 67, 68, 70, 79, 83, 88, 89, 95, 97, 101
                - stone(6) : 24, 44
                
        - 5 : broken(19)
            - [5, 79, 89], [5, 11, 97], [5, 68, 83], [5, 9, 68], [5, 34, 9], [5, 35, 34], [5, 55, 35], [5, 67, 55], [5, 16, 67], [5, 51, 89], [5, 40, 89], [5, 95, 40], [5, 52, 48], [5, 70, 48], [5, 101, 70], [5, 98, 70], [5, 88, 24], [5, 12, 88], [5, 94, 24]
            - other node : [9, 11, 12, 16, 24, 34, 35, 40, 48, 51, 52, 55, 67, 68, 70, 79, 83, 88, 89, 94, 95, 97, 98, 101]
            - **겹치는 other node**
                - break(4) : 9, 11, 12, 16, 24, 40, 48, 51, 52, 55, 67, 68, 70, 79, 83, 88, 89, 95, 97, 101
                - stone(6) : 24, 34, 35, 94
        - 6 : stone(22)
            - [6, 44, 100], [6, 28, 44], [6, 81, 86], [6, 82, 81], [6, 91, 82], [6, 35, 34], [6, 60, 65], [6, 21, 65], [6, 73, 82], [6, 53, 82], [6, 76, 82], [6, 14, 81], [6, 24, 86], [6, 96, 24], [6, 94, 24], [6, 38, 86], [6, 32, 86], [6, 19, 86], [6, 57, 28], [6, 50, 28], [6, 18, 100], [6, 92, 100]
            - other node : [14, 18, 19, 21, 24, 28, 32, 34, 35, 38, 44, 50, 53, 57, 60, 65, 73, 76, 81, 82, 86, 91, 92, 94, 96, 100]
        - 7 : stones(17)
            - [84, 87, 7], [45, 87, 7], [25, 72, 7], [39, 72, 7], [15, 39, 7], [26, 39, 7], [29, 39, 7], [25, 39, 7], [45, 39, 7], [84, 39, 7], [26, 29, 7], [15, 29, 7], [26, 15, 7], [26, 84, 7], [45, 26, 7], [46, 26, 7], [25, 26, 7]
            - other node : [15, 26, 29, 39, 72, 84, 87]
- 사이클 triple
    
    [[6, 44, 100], [6, 28, 44], [2, 86, 30], [6, 81, 86], [6, 82, 81], [2, 91, 82], [6, 91, 82], [2, 61, 91], [4, 89, 61], [4, 79, 89], [5, 79, 89], [4, 63, 83], [4, 97, 63], [5, 11, 97], [4, 11, 97], [1, 41, 63], [4, 41, 63], [4, 68, 83], [5, 68, 83], [4, 9, 68], [5, 9, 68], [5, 34, 9], [6, 35, 34], [5, 35, 34], [5, 55, 35], [4, 67, 55], [5, 67, 55], [4, 16, 67], [5, 16, 67], [4, 43, 68], [2, 71, 65], [6, 60, 65], [2, 60, 65], [2, 49, 65], [6, 21, 65], [4, 51, 89], [5, 51, 89], [4, 40, 89], [5, 40, 89], [4, 95, 40], [5, 95, 40], [4, 48, 61], [4, 52, 48], [5, 52, 48], [4, 70, 48], [5, 70, 48], [4, 101, 70], [5, 101, 70], [5, 98, 70], [4, 90, 61], [6, 73, 82], [6, 53, 82], [6, 76, 82], [1, 56, 76], [2, 42, 82], [3, 36, 81], [3, 69, 36], [6, 14, 81], [2, 31, 86], [6, 24, 86], [4, 88, 24], [5, 88, 24], [4, 12, 88], [5, 12, 88], [6, 96, 24], [5, 94, 24], [6, 94, 24], [6, 38, 86], [2, 32, 86], [6, 32, 86], [6, 19, 86], [4, 77, 30], [1, 23, 75], [4, 59, 30], [6, 57, 28], [3, 50, 28], [6, 50, 28], [3, 47, 28], [3, 10, 47], [4, 62, 44], [4, 22, 62], [6, 18, 100], [6, 92, 100], [84, 87, 7], [45, 87, 7], [25, 72, 7], [39, 72, 7], [15, 39, 7], [26, 39, 7], [29, 39, 7], [25, 39, 7], [45, 39, 7], [84, 39, 7], [26, 29, 7], [15, 29, 7], [26, 15, 7], [26, 84, 7], [45, 26, 7], [46, 26, 7], [25, 26, 7], [2, 6, 0], [4, 5, 0], [4, 99, 5], [4, 27, 5], [4, 20, 5], [4, 85, 5]]
    106
    

이렇게 시행착오를 겪어보니까 어떻게 찾고 어떻게 해야할 지 순서를 정해보자

1. 문제, 정답을 찾는다.
2. 해당하는 QA의 question node, answer node를 찾는다.
3. total graph, detected graph 파일을 연다.
4. 사이클 triple(in graph_analysis.ipynb에서 real_node변수)를 찾는다.
5. other_node.ipynb에서  사이클 triple기반으로 question, answer 노드와 연결된 other node를 찾는다.
6. other node 파악 및 겹치는 other node파악
    1. 이걸로 other node를 유추하기 힘들어서.. edge_index, edge_type정보 필요
7. other node 최종 유추
    1. 하지만 모든 other node의 text정보는 알 필요가 없음
    2. QA-GNN이 5hop이므로 context node기준으로 5-hop이내에서 긍정적, 부정적 사이클 몇개만 찾아보자.
        - 여기서 말한 긍정적이란 의미는 QA와 관련성이 있는 사이클인지를 말함